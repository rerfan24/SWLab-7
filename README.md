# SWLab-7

Reza Erfan Arani - 98105919 - Software Lab #7 - Refactoring

## Refactoring steps

### Loose coupling

در قدم اول من در برنامه هر جا `ArrayList` از اول تعریف شده بود را طبق قوائد Loose Coupling به `List` تبدیل کردم.

### Speculative Generality

در این بخش من در کلاس Address که دو constructor داشت یکی را که اضافی بود حذف کردم.

### Strategy

در این بخش من switch case داحل کلاس Address رو ورداشتم و جاش یک Strategy گذاشتم. درست است که الان خیلی لازم نبود ولی در آینده اگر در هر کدام از آن caseها بخواهد کاری انجام شود می شود به راحتی تنها در کلاس‌های strategy مربوطه اضافه شود.

### Duplicate Code

در این قسمت من یک بخش از کلاس CodeGenerator که duplication داشت را به یک متد بردم و duplication را حذف کردم.

## Answer To Questions

### هر یک از مفاهیم زیر را در یک خط توضیح دهید.

#### کد تمیز

کد تمیز به کدی می‌گویند که اولا برنامه‌نویسان دیگر بتوانند آن را متوجه شوند، در ثانی دارای duplication نباشد، سعی شود در حد امکان از کلاس‌ها و به طور کل خط‌های کم‌تری داشته باشد، تمامی تست‌ها را پاس کند و به طور کل آسان‌تر و ارزان‌تر maintain شود.

#### بدهی فنی

بدهی فنی را می‌توان به صورت کار عجله‌ای و یا بی‌دقت توسعه‌دهنده‌ها در قسمتی از توسعه‌ی نرم‌افزار تعریف کرد که بعدا خر تیم توسعه را خواهد گرفت و آنها مجبور می‌شوند که اوضاع را درست کنند. برای مثال اگر به خاطر شرایط بیزینسی تیمی مجبور شود featureی را زود عرضه کند که باگ داشته باشد و یا تمام نشده باشد مجبور می‌شود جلو‌تر با استفاده از patchها و غیره این کم‌کاری را بپوشاند.

#### بوی بد

بوی بد یا code smells نشان‌دهنده مشکلاتی هستند که در زمان refactoring می‌توان به آن‌ها رسید. معمولا code smells به راحتی قابل شناسایی و تعمیر هستند اما ممکن است آن‌ها نشان‌دهنده‌ی مشکلات بزرگ‌تر و عمیق‌تری درون برنامه‌ی ما باشند.

### طبق دسته‌بندی وبسایت refactoring.guru، بوهای بد کد به 5 دسته تقسیم می‌شوند. در مورد هر کدام از این 5 دسته توضیح مختصری دهید.

#### نوع اول: Bloaters

مربوط به نوعی از bad smells است که کدها به شدت از نظر سایزی بزرگ و حجیم شدند که کار کردن با آن‌ها بسیار سخت می‌شود. این نوع semllها خیلی به تدریح در برنامه شروع به رشد می‌کنند.

#### نوع دوم: Object-Orientation Abusers

این smells مربوط به طراحی اشتباه یا ناقص از اصول برنامه‌نویسی شی‌گرا تولید می‌شوند.

#### نوع سوم: Change Preventers

وجود این نوع از smells یعنی در برنامه ما برای تغییری در یک بخش از کد باید مقدار زیادی از بخش‌های دیگر را نیز تغییر دهیم و این باعث می‌شود که نگهداری بسیار سخت و هزینه‌بر شود.

#### نوع چهارم: Dispensables

یک dispensable چیزی است که می‌شود از شرش خلاص شد به طوری که اگر از شرش خلاص شویم هیچ گونه ضرری به محصول ما وارد نشود و اتفاقا باعث شود که کد cleanتر شده و راحت‌تر بتوان آن را فهمید و توسعه داد.

#### نوع پنجم: Couplers

تمامی Semllهای داخل این گروه مربوط به این هستند که نشان دهند کاپلینگ زیاد وجود دارد و یا نشان دهند که اگر coupling را با delegation عوض کتیم چه اتفاقی میافتد.

### یکی از انواع بوهای بد Lazy Class است.

#### این بوی بد در کدام یک از دسته‌بندی‌های 5گانه صورت می‌گیرد؟

این بوی بد در دسته `Dispensables` قرار می‌گیرد.

#### برای برطرف کردن این بو استفاده از کدام بازآرایی‌ها توصیه می‌شود؟

اجزایی که تقریبا کارایی ندارند باید توسط `inline-class` باآرایی شوند.
<br>
برای زیرکلاس‌هایی با متد‌های اندک می‌توان از بازآرایی `Collapse Hierarchy` استفاده کرد.

#### در چه مواقعی باید این بو را نادیده گرفت؟

بعضی وقت‌ها ممکن است یک Lazy Class برای معین کردن افدافمان در توسعه‌های آینده درست شده باشد. در این صورت ما باید یک توازن بین واضح بودن و سادگی را در کدمان رعایت کنیم.
